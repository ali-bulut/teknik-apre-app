files:
  "/etc/nginx/conf.d/01-timeout.conf":
     mode: "000644"
     owner: root
     group: root
     content: |
       keepalive_timeout 120s;
       proxy_connect_timeout 120s;
       proxy_send_timeout 120s; 
       proxy_read_timeout 120s; 
       fastcgi_send_timeout 120s; 
       fastcgi_read_timeout 120s;
  "/opt/elasticbeanstalk/support/conf/pumaconf.rb":
    mode: "000644"
    owner: root
    group: root
    content: |
      directory '/var/app/current'
      threads 0
      workers 0
      bind 'unix:///var/run/puma/my_app.sock'
      pidfile '/var/run/puma/puma.pid'
      stdout_redirect '/var/log/puma/puma.log', '/var/log/puma/puma.log', true
      daemonize false
container_commands:
  nginx_reload:
     command: "sudo service nginx reload"